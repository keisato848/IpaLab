# Azure Cosmos DB 設定設計書

## 基本情報
- **設定項目 ID:** DB-001
- **リソース種別:** Azure Cosmos DB for NoSQL
- **名称:** `cosmos-pm-exam-dx-db` (Azure Global等で作成された既存リソース)

## 詳細設定
| 項目                         | 設定値               | 備考                                                                  |
| :--------------------------- | :------------------- | :-------------------------------------------------------------------- |
| **リソースグループ**         | `rg-pm-exam-dx-prod-grobal` | (既存のグローバルRGを利用)                                            |
| **API**                      | Core (SQL)           | JSONドキュメントの標準操作                                            |
| **ロケーション**             | Global (East Asia含む)|                                                                       |
| **キャパシティモード**       | Serverless           | スパイクアクセス対応、低負荷時のコスト削減 (< 1000 RU/s 平均なら有利) |
| **Geo冗長**                  | 無効                 | コスト優先 (必要に応じて有効化)                                       |
| **マルチリージョン書き込み** | 無効                 |                                                                       |

## コンテナ設計 (Database: `PMExamDB` / `IPA_Exam_DB`)
| コンテナ名         | パーティションキー       | 備考                                                             |
| :----------------- | :----------------------- | :--------------------------------------------------------------- |
| `Items`            | `/pk`                    | 汎用コンテナ (typeプロパティで種別判定: User, Question, History) |
| **または個別設計** |                          |                                                                  |
| `Users`            | `/userId`                | ユーザー情報                                                     |
| `Questions`        | `/category` or `/examId` | 問題データ                                                       |
| `LearningHistory`  | `/userId`                | 学習履歴 (クエリ頻度が高いキー)                                  |

※ 本プロジェクトではMonorepo構成かつ小規模スタートのため、単一コンテナまたは論理ごとの分割を検討。初期は `Users`, `Questions`, `History` の3つを推奨。
